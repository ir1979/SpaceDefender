[1m============================= test session starts =============================[0m
platform win32 -- Python 3.13.3, pytest-9.0.2, pluggy-1.6.0 -- C:\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Reza Mortazavi\Dropbox\Projects\Ali School\Kharazmi\Game\space_defender
configfile: pytest.ini
testpaths: tests
[1mcollecting ... [0mcollected 11 items

tests/client/test_client_apply_state.py::test_apply_server_state_populates_groups [31mFAILED[0m[31m [  9%][0m
tests/gameplay/test_profile_and_shop.py::test_profile_selection_and_shop_purchase [31mFAILED[0m[31m [ 18%][0m
tests/gameplay/test_profile_and_shop.py::test_coin_earning_and_saving [32mPASSED[0m[31m [ 27%][0m
tests/gameplay/test_profile_and_shop.py::test_quit_level_logic [32mPASSED[0m[31m    [ 36%][0m
tests/gameplay/test_shooting.py::test_player_shooting [32mPASSED[0m[31m             [ 45%][0m
tests/gameplay/test_shop.py::test_shop [32mPASSED[0m[31m                            [ 54%][0m
tests/integration/test_play_online_crash.py::test_play_online [32mPASSED[0m[31m     [ 63%][0m
tests/integration/test_play_online_loop.py::test_network_mode_fixes [32mPASSED[0m[31m [ 72%][0m
tests/network/test_network_framing.py::test_send_receive_roundtrip [32mPASSED[0m[31m [ 81%][0m
tests/network/test_network_integration.py::test_server_client_integration [32mPASSED[0m[31m [ 90%][0m
tests/server/test_server.py::TestServerIntegration::test_client_connection_and_communication [32mPASSED[0m[31m [100%][0m

================================== FAILURES ===================================
[1m[31mE   assert 0 == 1[0m
[1m[31m     +  where 0 = len(<Group(0 sprites)>)[0m
[1m[31m     +    where <Group(0 sprites)> = <core.game.Game object at 0x000001AC3EE2B4D0>.enemies[0m
C:\Users\Reza Mortazavi\Dropbox\Projects\Ali School\Kharazmi\Game\space_defender\tests\client\test_client_apply_state.py:40: assert 0 == 1
[1m[31mE   AssertionError: Player object was not created after applying profile.[0m
[1m[31m    assert None is not None[0m
[1m[31m     +  where None = <core.game.Game object at 0x000001AC3EEB0CD0>.player[0m
---------------------------- Captured stdout call -----------------------------
Pygame mixer initialized successfully

Loading sounds from C:\Users\Reza Mortazavi\Dropbox\Projects\Ali School\Kharazmi\Game\space_defender\assets\sounds/...
  âœ“ Loaded: shoot.wav
  âœ“ Loaded: enemy_hit.wav
  âœ“ Loaded: explosion.wav
  âœ“ Loaded: powerup.wav
  âœ“ Loaded: coin.wav
  âœ“ Loaded: game_over.wav
  âœ“ Loaded: level_complete.wav
  âœ“ Loaded: shop_purchase.wav
  âœ“ Loaded: menu_select.wav
  âœ“ Loaded: splash.wav
Loaded 10/10 sounds


Loading sprites from C:\Users\Reza Mortazavi\Dropbox\Projects\Ali School\Kharazmi\Game\space_defender\assets\sprites/...
  âœ“ Loaded sprite: beam1.png
  âœ“ Loaded sprite: beam2.png
  âœ“ Loaded sprite: beam3.png
  âœ“ Loaded sprite: beam4.png
  âœ“ Loaded sprite: beam5.png
  âœ“ Loaded sprite: beam6.png
  âœ“ Loaded sprite: beamLong1.png
  âœ“ Loaded sprite: beamLong2.png
  âœ“ Loaded sprite: bold_silver.png
  âœ“ Loaded sprite: bolt_bronze.png
  âœ“ Loaded sprite: bolt_gold.png
  âœ“ Loaded sprite: bullet_basic.png
  âœ“ Loaded sprite: bullet_laser.png
  âœ“ Loaded sprite: bullet_missile.png
  âœ“ Loaded sprite: bullet_plasma.png
  âœ“ Loaded sprite: buttonBlue.png
  âœ“ Loaded sprite: buttonGreen.png
  âœ“ Loaded sprite: buttonRed.png
  âœ“ Loaded sprite: buttonYellow.png
  âœ“ Loaded sprite: cockpitBlue_0.png
  âœ“ Loaded sprite: cockpitBlue_1.png
  âœ“ Loaded sprite: cockpitBlue_2.png
  âœ“ Loaded sprite: cockpitBlue_3.png
  âœ“ Loaded sprite: cockpitBlue_4.png
  âœ“ Loaded sprite: cockpitBlue_5.png
  âœ“ Loaded sprite: cockpitBlue_6.png
  âœ“ Loaded sprite: cockpitBlue_7.png
  âœ“ Loaded sprite: cockpitGreen_0.png
  âœ“ Loaded sprite: cockpitGreen_1.png
  âœ“ Loaded sprite: cockpitGreen_2.png
  âœ“ Loaded sprite: cockpitGreen_3.png
  âœ“ Loaded sprite: cockpitGreen_4.png
  âœ“ Loaded sprite: cockpitGreen_5.png
  âœ“ Loaded sprite: cockpitGreen_6.png
  âœ“ Loaded sprite: cockpitGreen_7.png
  âœ“ Loaded sprite: cockpitRed_0.png
  âœ“ Loaded sprite: cockpitRed_1.png
  âœ“ Loaded sprite: cockpitRed_2.png
  âœ“ Loaded sprite: cockpitRed_3.png
  âœ“ Loaded sprite: cockpitRed_4.png
  âœ“ Loaded sprite: cockpitRed_5.png
  âœ“ Loaded sprite: cockpitRed_6.png
  âœ“ Loaded sprite: cockpitRed_7.png
  âœ“ Loaded sprite: cockpitYellow_0.png
  âœ“ Loaded sprite: cockpitYellow_1.png
  âœ“ Loaded sprite: cockpitYellow_2.png
  âœ“ Loaded sprite: cockpitYellow_3.png
  âœ“ Loaded sprite: cockpitYellow_4.png
  âœ“ Loaded sprite: cockpitYellow_5.png
  âœ“ Loaded sprite: cockpitYellow_6.png
  âœ“ Loaded sprite: cockpitYellow_7.png
  âœ“ Loaded sprite: cursor.png
  âœ“ Loaded sprite: enemyBlack1.png
  âœ“ Loaded sprite: enemyBlack2.png
  âœ“ Loaded sprite: enemyBlack3.png
  âœ“ Loaded sprite: enemyBlack4.png
  âœ“ Loaded sprite: enemyBlack5.png
  âœ“ Loaded sprite: enemyBlue3.png
  âœ“ Loaded sprite: enemyBlue4.png
  âœ“ Loaded sprite: enemyBlue5.png
  âœ“ Loaded sprite: enemyGreen2.png
  âœ“ Loaded sprite: enemyGreen3.png
  âœ“ Loaded sprite: enemyGreen4.png
  âœ“ Loaded sprite: enemyGreen5.png
  âœ“ Loaded sprite: enemyRed2.png
  âœ“ Loaded sprite: enemyRed3.png
  âœ“ Loaded sprite: enemyRed4.png
  âœ“ Loaded sprite: enemyRed5.png
  âœ“ Loaded sprite: enemy_basic.png
  âœ“ Loaded sprite: enemy_boss.png
  âœ“ Loaded sprite: enemy_fast.png
  âœ“ Loaded sprite: enemy_tank.png
  âœ“ Loaded sprite: enemy_weaver.png
  âœ“ Loaded sprite: engine1.png
  âœ“ Loaded sprite: engine2.png
  âœ“ Loaded sprite: engine3.png
  âœ“ Loaded sprite: engine4.png
  âœ“ Loaded sprite: engine5.png
  âœ“ Loaded sprite: fighter.png
  âœ“ Loaded sprite: fire00.png
  âœ“ Loaded sprite: fire01.png
  âœ“ Loaded sprite: fire02.png
  âœ“ Loaded sprite: fire03.png
  âœ“ Loaded sprite: fire04.png
  âœ“ Loaded sprite: fire05.png
  âœ“ Loaded sprite: fire06.png
  âœ“ Loaded sprite: fire07.png
  âœ“ Loaded sprite: fire08.png
  âœ“ Loaded sprite: fire09.png
  âœ“ Loaded sprite: fire10.png
  âœ“ Loaded sprite: fire11.png
  âœ“ Loaded sprite: fire12.png
  âœ“ Loaded sprite: fire13.png
  âœ“ Loaded sprite: fire14.png
  âœ“ Loaded sprite: fire15.png
  âœ“ Loaded sprite: fire16.png
  âœ“ Loaded sprite: fire17.png
  âœ“ Loaded sprite: fire18.png
  âœ“ Loaded sprite: fire19.png
  âœ“ Loaded sprite: gun00.png
  âœ“ Loaded sprite: gun01.png
  âœ“ Loaded sprite: gun02.png
  âœ“ Loaded sprite: gun03.png
  âœ“ Loaded sprite: gun04.png
  âœ“ Loaded sprite: gun05.png
  âœ“ Loaded sprite: gun06.png
  âœ“ Loaded sprite: gun07.png
  âœ“ Loaded sprite: gun08.png
  âœ“ Loaded sprite: gun09.png
  âœ“ Loaded sprite: gun10.png
  âœ“ Loaded sprite: laserBlue02.png
  âœ“ Loaded sprite: laserBlue03.png
  âœ“ Loaded sprite: laserBlue04.png
  âœ“ Loaded sprite: laserBlue05.png
  âœ“ Loaded sprite: laserBlue06.png
  âœ“ Loaded sprite: laserBlue07.png
  âœ“ Loaded sprite: laserBlue08.png
  âœ“ Loaded sprite: laserBlue09.png
  âœ“ Loaded sprite: laserBlue10.png
  âœ“ Loaded sprite: laserBlue11.png
  âœ“ Loaded sprite: laserBlue12.png
  âœ“ Loaded sprite: laserBlue13.png
  âœ“ Loaded sprite: laserBlue14.png
  âœ“ Loaded sprite: laserBlue15.png
  âœ“ Loaded sprite: laserBlue16.png
  âœ“ Loaded sprite: laserGreen01.png
  âœ“ Loaded sprite: laserGreen03.png
  âœ“ Loaded sprite: laserGreen04.png
  âœ“ Loaded sprite: laserGreen05.png
  âœ“ Loaded sprite: laserGreen06.png
  âœ“ Loaded sprite: laserGreen07.png
  âœ“ Loaded sprite: laserGreen08.png
  âœ“ Loaded sprite: laserGreen09.png
  âœ“ Loaded sprite: laserGreen10.png
  âœ“ Loaded sprite: laserGreen11.png
  âœ“ Loaded sprite: laserGreen12.png
  âœ“ Loaded sprite: laserGreen13.png
  âœ“ Loaded sprite: laserGreen14.png
  âœ“ Loaded sprite: laserGreen15.png
  âœ“ Loaded sprite: laserGreen16.png
  âœ“ Loaded sprite: laserRed02.png
  âœ“ Loaded sprite: laserRed03.png
  âœ“ Loaded sprite: laserRed04.png
  âœ“ Loaded sprite: laserRed05.png
  âœ“ Loaded sprite: laserRed06.png
  âœ“ Loaded sprite: laserRed07.png
  âœ“ Loaded sprite: laserRed08.png
  âœ“ Loaded sprite: laserRed09.png
  âœ“ Loaded sprite: laserRed10.png
  âœ“ Loaded sprite: laserRed11.png
  âœ“ Loaded sprite: laserRed12.png
  âœ“ Loaded sprite: laserRed13.png
  âœ“ Loaded sprite: laserRed14.png
  âœ“ Loaded sprite: laserRed15.png
  âœ“ Loaded sprite: laserRed16.png
  âœ“ Loaded sprite: meteorBrown_big1.png
  âœ“ Loaded sprite: meteorBrown_big2.png
  âœ“ Loaded sprite: meteorBrown_big3.png
  âœ“ Loaded sprite: meteorBrown_big4.png
  âœ“ Loaded sprite: meteorBrown_med1.png
  âœ“ Loaded sprite: meteorBrown_med3.png
  âœ“ Loaded sprite: meteorBrown_small1.png
  âœ“ Loaded sprite: meteorBrown_small2.png
  âœ“ Loaded sprite: meteorBrown_tiny1.png
  âœ“ Loaded sprite: meteorBrown_tiny2.png
  âœ“ Loaded sprite: meteorGrey_big1.png
  âœ“ Loaded sprite: meteorGrey_big2.png
  âœ“ Loaded sprite: meteorGrey_big3.png
  âœ“ Loaded sprite: meteorGrey_big4.png
  âœ“ Loaded sprite: meteorGrey_med1.png
  âœ“ Loaded sprite: meteorGrey_med2.png
  âœ“ Loaded sprite: meteorGrey_small1.png
  âœ“ Loaded sprite: meteorGrey_small2.png
  âœ“ Loaded sprite: meteorGrey_tiny1.png
  âœ“ Loaded sprite: meteorGrey_tiny2.png
  âœ“ Loaded sprite: numeral0.png
  âœ“ Loaded sprite: numeral1.png
  âœ“ Loaded sprite: numeral2.png
  âœ“ Loaded sprite: numeral3.png
  âœ“ Loaded sprite: numeral4.png
  âœ“ Loaded sprite: numeral5.png
  âœ“ Loaded sprite: numeral6.png
  âœ“ Loaded sprite: numeral7.png
  âœ“ Loaded sprite: numeral8.png
  âœ“ Loaded sprite: numeral9.png
  âœ“ Loaded sprite: numeralX.png
  âœ“ Loaded sprite: pill_blue.png
  âœ“ Loaded sprite: pill_green.png
  âœ“ Loaded sprite: pill_red.png
  âœ“ Loaded sprite: pill_yellow.png
  âœ“ Loaded sprite: playerLife1_blue.png
  âœ“ Loaded sprite: playerLife1_green.png
  âœ“ Loaded sprite: playerLife1_orange.png
  âœ“ Loaded sprite: playerLife1_red.png
  âœ“ Loaded sprite: playerLife2_blue.png
  âœ“ Loaded sprite: playerLife2_green.png
  âœ“ Loaded sprite: playerLife2_orange.png
  âœ“ Loaded sprite: playerLife2_red.png
  âœ“ Loaded sprite: playerLife3_blue.png
  âœ“ Loaded sprite: playerLife3_green.png
  âœ“ Loaded sprite: playerLife3_orange.png
  âœ“ Loaded sprite: playerLife3_red.png
  âœ“ Loaded sprite: playerShip1_damage1.png
  âœ“ Loaded sprite: playerShip1_damage2.png
  âœ“ Loaded sprite: playerShip1_damage3.png
  âœ“ Loaded sprite: playerShip1_green.png
  âœ“ Loaded sprite: playerShip1_orange.png
  âœ“ Loaded sprite: playerShip1_red.png
  âœ“ Loaded sprite: playerShip2_damage1.png
  âœ“ Loaded sprite: playerShip2_damage2.png
  âœ“ Loaded sprite: playerShip2_damage3.png
  âœ“ Loaded sprite: playerShip2_green.png
  âœ“ Loaded sprite: playerShip2_orange.png
  âœ“ Loaded sprite: playerShip2_red.png
  âœ“ Loaded sprite: playerShip3_blue.png
  âœ“ Loaded sprite: playerShip3_damage1.png
  âœ“ Loaded sprite: playerShip3_damage2.png
  âœ“ Loaded sprite: playerShip3_damage3.png
  âœ“ Loaded sprite: playerShip3_green.png
  âœ“ Loaded sprite: playerShip3_orange.png
  âœ“ Loaded sprite: playerShip3_red.png
  âœ“ Loaded sprite: powerupBlue.png
  âœ“ Loaded sprite: powerupBlue_bolt.png
  âœ“ Loaded sprite: powerupBlue_shield.png
  âœ“ Loaded sprite: powerupBlue_star.png
  âœ“ Loaded sprite: powerupGreen.png
  âœ“ Loaded sprite: powerupGreen_bolt.png
  âœ“ Loaded sprite: powerupGreen_shield.png
  âœ“ Loaded sprite: powerupGreen_star.png
  âœ“ Loaded sprite: powerupRed.png
  âœ“ Loaded sprite: powerupRed_bolt.png
  âœ“ Loaded sprite: powerupRed_shield.png
  âœ“ Loaded sprite: powerupRed_star.png
  âœ“ Loaded sprite: powerupYellow.png
  âœ“ Loaded sprite: powerupYellow_bolt.png
  âœ“ Loaded sprite: powerupYellow_shield.png
  âœ“ Loaded sprite: powerupYellow_star.png
  âœ“ Loaded sprite: scratch1.png
  âœ“ Loaded sprite: scratch2.png
  âœ“ Loaded sprite: scratch3.png
  âœ“ Loaded sprite: shield1.png
  âœ“ Loaded sprite: shield2.png
  âœ“ Loaded sprite: shield3.png
  âœ“ Loaded sprite: shield_bronze.png
  âœ“ Loaded sprite: shield_gold.png
  âœ“ Loaded sprite: shield_silver.png
  âœ“ Loaded sprite: spaceship.png
  âœ“ Loaded sprite: speed.png
  âœ“ Loaded sprite: star1.png
  âœ“ Loaded sprite: star2.png
  âœ“ Loaded sprite: star3.png
  âœ“ Loaded sprite: star_bronze.png
  âœ“ Loaded sprite: star_gold.png
  âœ“ Loaded sprite: star_silver.png
  âœ“ Loaded sprite: things_bronze.png
  âœ“ Loaded sprite: things_gold.png
  âœ“ Loaded sprite: things_silver.png
  âœ“ Loaded sprite: turretBase_big.png
  âœ“ Loaded sprite: turretBase_small.png
  âœ“ Loaded sprite: ufoGreen.png
  âœ“ Loaded sprite: ufoRed.png
  âœ“ Loaded sprite: ufoYellow.png
  âœ“ Loaded sprite: wingBlue_0.png
  âœ“ Loaded sprite: wingBlue_1.png
  âœ“ Loaded sprite: wingBlue_2.png
  âœ“ Loaded sprite: wingBlue_3.png
  âœ“ Loaded sprite: wingBlue_4.png
  âœ“ Loaded sprite: wingBlue_5.png
  âœ“ Loaded sprite: wingBlue_6.png
  âœ“ Loaded sprite: wingBlue_7.png
  âœ“ Loaded sprite: wingGreen_0.png
  âœ“ Loaded sprite: wingGreen_1.png
  âœ“ Loaded sprite: wingGreen_2.png
  âœ“ Loaded sprite: wingGreen_3.png
  âœ“ Loaded sprite: wingGreen_4.png
  âœ“ Loaded sprite: wingGreen_5.png
  âœ“ Loaded sprite: wingGreen_6.png
  âœ“ Loaded sprite: wingGreen_7.png
  âœ“ Loaded sprite: wingRed_0.png
  âœ“ Loaded sprite: wingRed_1.png
  âœ“ Loaded sprite: wingRed_2.png
  âœ“ Loaded sprite: wingRed_3.png
  âœ“ Loaded sprite: wingRed_4.png
  âœ“ Loaded sprite: wingRed_5.png
  âœ“ Loaded sprite: wingRed_6.png
  âœ“ Loaded sprite: wingRed_7.png
  âœ“ Loaded sprite: wingYellow_0.png
  âœ“ Loaded sprite: wingYellow_1.png
  âœ“ Loaded sprite: wingYellow_2.png
  âœ“ Loaded sprite: wingYellow_3.png
  âœ“ Loaded sprite: wingYellow_4.png
  âœ“ Loaded sprite: wingYellow_5.png
  âœ“ Loaded sprite: wingYellow_6.png
  âœ“ Loaded sprite: wingYellow_7.png
Loaded 294 sprite(s)

âœ“ Loaded splash screen image from C:\Users\Reza Mortazavi\Dropbox\Projects\Ali School\Kharazmi\Game\space_defender\assets\splash.png
---------------------------- Captured stderr call -----------------------------
2026-02-16 09:36:22 - space_defender.profile_shop_test - INFO - [test_profile_and_shop.py:51] - ================================================================================
2026-02-16 09:36:22 - space_defender.profile_shop_test - INFO - [test_profile_and_shop.py:52] - Starting Profile Selection -> Shop Purchase integration test...
2026-02-16 09:36:22 - space_defender.profile_shop_test - INFO - [test_profile_and_shop.py:53] - ================================================================================
2026-02-16 09:36:22 - space_defender.profile_shop_test - INFO - [test_profile_and_shop.py:59] - Cleaned up existing test profile: test_shopper_profile_123
2026-02-16 09:36:22 - space_defender.save_system - INFO - [save_system.py:151] - Profile 'test_shopper_profile_123' saved successfully.
2026-02-16 09:36:22 - space_defender.profile_shop_test - INFO - [test_profile_and_shop.py:64] - Created and saved test profile 'test_shopper_profile_123' with 500 total_coins.
2026-02-16 09:36:22 - space_defender.profile_shop_test - INFO - [test_profile_and_shop.py:75] - Simulated profile selection. Applied 'test_shopper_profile_123' to the game.
------------------------------ Captured log call ------------------------------
[32mINFO    [0m space_defender.profile_shop_test:test_profile_and_shop.py:51 ================================================================================
[32mINFO    [0m space_defender.profile_shop_test:test_profile_and_shop.py:52 Starting Profile Selection -> Shop Purchase integration test...
[32mINFO    [0m space_defender.profile_shop_test:test_profile_and_shop.py:53 ================================================================================
[32mINFO    [0m space_defender.profile_shop_test:test_profile_and_shop.py:59 Cleaned up existing test profile: test_shopper_profile_123
[32mINFO    [0m space_defender.save_system:save_system.py:151 Profile 'test_shopper_profile_123' saved successfully.
[32mINFO    [0m space_defender.profile_shop_test:test_profile_and_shop.py:64 Created and saved test profile 'test_shopper_profile_123' with 500 total_coins.
[32mINFO    [0m space_defender.profile_shop_test:test_profile_and_shop.py:75 Simulated profile selection. Applied 'test_shopper_profile_123' to the game.
C:\Users\Reza Mortazavi\Dropbox\Projects\Ali School\Kharazmi\Game\space_defender\tests\gameplay\test_profile_and_shop.py:78: AssertionError: Player object was not created after applying profile.
[33m============================== warnings summary ===============================[0m
tests/integration/test_play_online_crash.py::test_play_online
  C:\Users\Reza Mortazavi\AppData\Roaming\Python\Python313\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/integration/test_play_online_crash.py::test_play_online returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/integration/test_play_online_loop.py::test_network_mode_fixes
  C:\Users\Reza Mortazavi\AppData\Roaming\Python\Python313\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/integration/test_play_online_loop.py::test_network_mode_fixes returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/network/test_network_integration.py::test_server_client_integration
  C:\Users\Reza Mortazavi\AppData\Roaming\Python\Python313\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/network/test_network_integration.py::test_server_client_integration returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
[36m[1m=========================== short test summary info ===========================[0m
[31mFAILED[0m tests/client/test_client_apply_state.py::[1mtest_apply_server_state_populates_groups[0m - assert 0 == 1
 +  where 0 = len(<Group(0 sprites)>)
 +    where <Group(0 sprites)> = <core.game.Game object at 0x000001AC3EE2B4D0>.enemies
[31mFAILED[0m tests/gameplay/test_profile_and_shop.py::[1mtest_profile_selection_and_shop_purchase[0m - AssertionError: Player object was not created after applying profile.
assert None is not None
 +  where None = <core.game.Game object at 0x000001AC3EEB0CD0>.player
[31m================== [31m[1m2 failed[0m, [32m9 passed[0m, [33m3 warnings[0m[31m in 10.45s[0m[31m ===================[0m
